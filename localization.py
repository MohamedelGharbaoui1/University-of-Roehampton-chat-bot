# localization.py - Enhanced Language Management System for University Chatbot

import json
from typing import Dict, Any, Optional
from pathlib import Path
import streamlit as st
import logging

logger = logging.getLogger(__name__)

class LanguageManager:
    """Enhanced language management system for University Chatbot"""
    
    def __init__(self):
        self.current_language = 'en'
        self.translations = {}
        self.rtl_languages = {'ar'}  # Right-to-left languages
        self.load_translations()
    
    def load_translations(self):
        """Load all translation dictionaries"""
        self.translations = {
            'en': self._get_english_translations(),
            'ar': self._get_arabic_translations(),
            'fr': self._get_french_translations(),
            'es': self._get_spanish_translations()
        }
        
        # Try to load from JSON files if they exist
        translations_dir = Path("translations")
        if translations_dir.exists():
            for lang_code in self.translations.keys():
                file_path = translations_dir / f"{lang_code}.json"
                if file_path.exists():
                    try:
                        with open(file_path, 'r', encoding='utf-8') as f:
                            loaded_translations = json.load(f)
                            self.translations[lang_code].update(loaded_translations)
                            logger.info(f"Loaded translations from {lang_code}.json")
                    except Exception as e:
                        logger.error(f"Error loading {lang_code}.json: {e}")
    
    def set_language(self, lang_code: str):
        """Set current language and update session state"""
        if lang_code in self.translations:
            self.current_language = lang_code
            if 'language' not in st.session_state or st.session_state.language != lang_code:
                st.session_state.language = lang_code
                st.rerun()
    
    def get_text(self, key: str, default: str = None, **kwargs) -> str:
        """Get translated text with parameter substitution"""
        # Get translation from current language
        text = self.translations.get(self.current_language, {}).get(key)
        
        # Fallback to default parameter if provided
        if text is None and default is not None:
            text = default
        
        # Fallback to English if translation missing
        if text is None and self.current_language != 'en':
            text = self.translations.get('en', {}).get(key, key)
        
        # Final fallback to key itself
        if text is None:
            text = key
        
        # Parameter substitution
        if kwargs:
            try:
                text = text.format(**kwargs)
            except (KeyError, ValueError):
                pass  # Ignore formatting errors
        
        return text
    
    def is_rtl(self) -> bool:
        """Check if current language is right-to-left"""
        return self.current_language in self.rtl_languages
    
    def get_language_options(self) -> Dict[str, str]:
        """Get available language options for UI"""
        return {
            'en': 'üá∫üá∏ English',
            'ar': 'üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
            'fr': 'üá´üá∑ Fran√ßais', 
            'es': 'üá™üá∏ Espa√±ol'
        }
    
    def _get_english_translations(self) -> Dict[str, str]:
        """English translations (base language)"""
        return {
            # App Headers
            'app_title': 'University of Roehampton Assistant',
            'app_subtitle': 'Your intelligent academic companion',
            'welcome_message': 'How can I help you today?',
            'powered_by': 'Powered by AI',
            
            # Navigation & Controls
            'language_selector': 'Language',
            'voice_settings': 'Voice Settings',
            'quick_actions': 'Quick Actions',
            'system_status': 'System Status',
            'student_information': 'Student Information',
            'current_session': 'Current Session',
            
            # Authentication
            'enter_student_id': 'Enter Your Student ID',
            'student_id_label': 'Student ID:',
            'student_id_placeholder': 'e.g., A00034131',
            'student_id_help': 'Enter your complete Roehampton University Student ID',
            'enter_access_code': 'Enter Your Access Code',
            'access_code_label': 'Access Code:',
            'access_code_placeholder': 'Enter your unique code',
            'access_code_help': 'Enter the numerical code provided to you',
            'verify_button': 'Verify ‚úÖ',
            'back_button': 'üîô Back',
            'next_button': 'Next ‚û°Ô∏è',
            
            # Module Selection
            'select_module': 'Select Your Module',
            'module_label': 'Module:',
            'programme_label': 'Programme:',
            'choose_module': 'Choose the module you need assistance with:',
            'documents_available': 'documents available',
            'all_materials': 'All {module} Materials',
            'select_button': 'Select {module}',
            
            # Coursework Types
            'coursework_assistance': 'Coursework Assistance',
            'coursework_help_type': 'What type of coursework help do you need?',
            'assignment_questions': 'Assignment Questions',
            'assignment_questions_desc': 'Help understanding assignment requirements and questions',
            'reading_materials': 'Reading Materials',
            'reading_materials_desc': 'Assistance with course readings and materials',
            'concepts_theory': 'Concepts & Theory',
            'concepts_theory_desc': 'Explanation of key concepts and theories',
            'exam_preparation': 'Exam Preparation',
            'exam_preparation_desc': 'Help preparing for examinations',
            'general_questions': 'General Questions',
            'general_questions_desc': 'Any other questions about the module',
            
            # Chat Interface
            'course_assistant': 'Course Assistant',
            'ethics_advisor': 'Ethics Advisor',
            'you': 'You',
            'loading_materials': 'Loading your module materials...',
            'example_questions': 'Example Questions',
            'chat_placeholder': 'Ask me about your coursework...',
            'ethics_placeholder': 'Ask me about ethics based on the Reforming Modernity document...',
            'analyzing_materials': 'Analyzing your coursework materials...',
            'consulting_ethics': 'Consulting ethics guidance...',
            
            # Audio
            'enable_audio': 'Enable Audio Responses',
            'audio_help': 'Toggle audio responses for accessibility',
            'select_voice': 'Select Voice',
            'voice_help': 'Choose the voice for audio responses',
            'test_voice': 'Test Voice',
            'generating_audio': 'Generating audio...',
            'audio_ready': 'Audio ready!',
            'audio_error': 'Failed to generate audio',
            'audio_disabled': 'Audio responses are disabled',
            
            # Buttons and Actions
            'new_session': 'New Session',
            'clear_chat': 'Clear Chat',
            'change_module': 'Change Module',
            'start_over': 'Start Over',
            'back_to_menu': 'Back to Menu',
            'back_to_welcome': 'Back to Welcome',
            'back_to_modules': 'Back to Modules',
            'back_to_authentication': 'Back to Authentication',
            
            # Error Messages
            'api_key_missing': 'OpenAI API key not configured. Please check your .env file.',
            'no_docs_error': 'No document content available',
            'enter_question': 'Please ask a question about your coursework.',
            'enter_ethics_question': 'Please enter a question.',
            'no_modules_found': 'No modules found for your account. Please contact support.',
            'student_not_found': 'Student ID \'{student_id}\' not found in database',
            'invalid_code': 'Invalid code for student {student_id}',
            'auth_successful': 'Authentication successful',
            'auth_required': 'Student authentication required',
            'student_data_missing': 'Student data not loaded',
            
            # Status Messages
            'database_connected': 'Database Connected',
            'database_not_loaded': 'Database Not Loaded',
            'ai_service_connected': 'AI Service Connected',
            'ai_service_unavailable': 'AI Service Not Available',
            
            # Welcome Screen
            'ethics_document_help': 'Ethics Document Help',
            'ethics_help_desc': 'Get assistance with ethics-related documents and guidelines',
            'coursework_help': 'University Coursework Help',
            'coursework_help_desc': 'Get help with your specific coursework materials',
            
            # Ethics
            'ethics_guidance': 'Ethics Guidance',
            'ethics_document': 'Ethics Document',
            'about_ethics_document': 'About This Ethics Document',
            'ethics_assistant_usage': 'How to Use This Ethics Assistant',
            'ethics_examples': 'You can ask questions like:',
            'ethics_example_1': 'What are the main ethical principles discussed in this document?',
            'ethics_example_2': 'How does this document define ethical behavior?',
            'ethics_example_3': 'What guidance does this provide for [specific situation]?',
            'ethics_example_4': 'Can you summarize the key ethical concepts covered?',
            'ethics_tips': 'Tips:',
            'ethics_tip_1': 'Be specific about what ethical guidance you\'re looking for',
            'ethics_tip_2': 'Ask about concepts, principles, or situations mentioned in the document',
            'ethics_tip_3': 'Request examples or applications of ethical principles',
            
            # Progress and Features
            'step_label': 'Step {current} of {total}',
            'welcome_features': 'Feature Highlights',
            'feature_ethics_title': 'Ethics Guidance',
            'feature_ethics_desc': 'Access comprehensive ethics guidance based on university policies',
            'feature_coursework_title': 'Coursework Support',
            'feature_coursework_desc': 'Get personalized help with your module materials and assignments',
            'feature_secure_title': 'Secure Access',
            'feature_secure_desc': 'Student authentication ensures you only access your own materials',
            'feature_audio_title': 'Audio Support',
            'feature_audio_desc': 'Listen to responses with text-to-speech functionality',
        }
    
    def _get_arabic_translations(self) -> Dict[str, str]:
        """Arabic translations"""
        return {
            # App Headers
            'app_title': 'ŸÖÿ≥ÿßÿπÿØ ÿ¨ÿßŸÖÿπÿ© ÿ±ŸàŸáÿßŸÖÿ®ÿ™ŸàŸÜ',
            'app_subtitle': 'ÿ±ŸÅŸäŸÇŸÉ ÿßŸÑÿ£ŸÉÿßÿØŸäŸÖŸä ÿßŸÑÿ∞ŸÉŸä',
            'welcome_message': 'ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü',
            'powered_by': 'ŸÖÿØÿπŸàŸÖ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä',
            
            # Navigation & Controls
            'language_selector': 'ÿßŸÑŸÑÿ∫ÿ©',
            'voice_settings': 'ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿµŸàÿ™',
            'quick_actions': 'ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ≥ÿ±Ÿäÿπÿ©',
            'system_status': 'ÿ≠ÿßŸÑÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ',
            'student_information': 'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∑ÿßŸÑÿ®',
            'current_session': 'ÿßŸÑÿ¨ŸÑÿ≥ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©',
            
            # Authentication
            'enter_student_id': 'ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸÑÿ® ÿßŸÑÿ¨ÿßŸÖÿπŸä',
            'student_id_label': 'ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®:',
            'student_id_placeholder': 'ŸÖÿ´ÿßŸÑ: A00034131',
            'student_id_help': 'ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸÑÿ® ÿßŸÑŸÉÿßŸÖŸÑ ŸÑÿ¨ÿßŸÖÿπÿ© ÿ±ŸàŸáÿßŸÖÿ®ÿ™ŸàŸÜ',
            'enter_access_code': 'ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑŸàÿµŸàŸÑ',
            'access_code_label': 'ÿ±ŸÖÿ≤ ÿßŸÑŸàÿµŸàŸÑ:',
            'access_code_placeholder': 'ÿ£ÿØÿÆŸÑ ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑŸÅÿ±ŸäÿØ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ',
            'access_code_help': 'ÿ£ÿØÿÆŸÑ ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑÿ±ŸÇŸÖŸä ÿßŸÑŸÖŸÇÿØŸÖ ŸÑŸÉ',
            'verify_button': 'ÿ™ÿ≠ŸÇŸÇ ‚úÖ',
            'back_button': 'üîô ÿ±ÿ¨Ÿàÿπ',
            'next_button': 'ÿßŸÑÿ™ÿßŸÑŸä ‚û°Ô∏è',
            
            # Module Selection
            'select_module': 'ÿßÿÆÿ™ÿ± ÿßŸÑŸàÿ≠ÿØÿ© ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©',
            'module_label': 'ÿßŸÑŸàÿ≠ÿØÿ©:',
            'programme_label': 'ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨:',
            'choose_module': 'ÿßÿÆÿ™ÿ± ÿßŸÑŸàÿ≠ÿØÿ© ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ≠ÿ™ÿßÿ¨ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸäŸáÿß:',
            'documents_available': 'ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ©',
            'all_materials': 'ÿ¨ŸÖŸäÿπ ŸÖŸàÿßÿØ {module}',
            'select_button': 'ÿßÿÆÿ™ÿ± {module}',
            
            # Coursework Types
            'coursework_assistance': 'ŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©',
            'coursework_help_type': 'ŸÖÿß ŸÜŸàÿπ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿ≠ÿ™ÿßÿ¨Ÿáÿßÿü',
            'assignment_questions': 'ÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™',
            'assignment_questions_desc': 'ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ŸÅŸáŸÖ ŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ Ÿàÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™',
            'reading_materials': 'ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑŸÇÿ±ÿßÿ¶Ÿäÿ©',
            'reading_materials_desc': 'ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ŸÇÿ±ÿßÿ°ÿßÿ™ ŸàŸÖŸàÿßÿØ ÿßŸÑŸÖŸÇÿ±ÿ±',
            'concepts_theory': 'ÿßŸÑŸÖŸÅÿßŸáŸäŸÖ ŸàÿßŸÑŸÜÿ∏ÿ±Ÿäÿßÿ™',
            'concepts_theory_desc': 'ÿ¥ÿ±ÿ≠ ÿßŸÑŸÖŸÅÿßŸáŸäŸÖ ŸàÿßŸÑŸÜÿ∏ÿ±Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©',
            'exam_preparation': 'ÿßŸÑÿßÿ≥ÿ™ÿπÿØÿßÿØ ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™',
            'exam_preparation_desc': 'ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿßÿ≥ÿ™ÿπÿØÿßÿØ ŸÑŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™',
            'general_questions': 'ÿ£ÿ≥ÿ¶ŸÑÿ© ÿπÿßŸÖÿ©',
            'general_questions_desc': 'ÿ£Ÿä ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ£ÿÆÿ±Ÿâ ÿ≠ŸàŸÑ ÿßŸÑŸàÿ≠ÿØÿ© ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©',
            
            # Chat Interface
            'course_assistant': 'ŸÖÿ≥ÿßÿπÿØ ÿßŸÑŸÖŸÇÿ±ÿ±',
            'ethics_advisor': 'ŸÖÿ≥ÿ™ÿ¥ÿßÿ± ÿßŸÑÿ£ÿÆŸÑÿßŸÇ',
            'you': 'ÿ£ŸÜÿ™',
            'loading_materials': 'ÿ¨ÿßÿ±Ÿç ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸàÿßÿØ ÿßŸÑŸàÿ≠ÿØÿ© ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©...',
            'example_questions': 'ÿ£ŸÖÿ´ŸÑÿ© ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©',
            'chat_placeholder': 'ÿßÿ≥ÿ£ŸÑŸÜŸä ÿπŸÜ Ÿàÿßÿ¨ÿ®ÿßÿ™ŸÉ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©...',
            'ethics_placeholder': 'ÿßÿ≥ÿ£ŸÑŸÜŸä ÿπŸÜ ÿßŸÑÿ£ÿÆŸÑÿßŸÇ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ Ÿàÿ´ŸäŸÇÿ© ÿ•ÿµŸÑÿßÿ≠ ÿßŸÑÿ≠ÿØÿßÿ´ÿ©...',
            'analyzing_materials': 'ÿ¨ÿßÿ±Ÿç ÿ™ÿ≠ŸÑŸäŸÑ ŸÖŸàÿßÿØ Ÿàÿßÿ¨ÿ®ÿßÿ™ŸÉ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©...',
            'consulting_ethics': 'ÿ¨ÿßÿ±Ÿç ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸä...',
            
            # Audio
            'enable_audio': 'ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ©',
            'audio_help': 'ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ© ŸÑÿ•ŸÖŸÉÿßŸÜŸäÿ© ÿßŸÑŸàÿµŸàŸÑ',
            'select_voice': 'ÿßÿÆÿ™ÿ± ÿßŸÑÿµŸàÿ™',
            'voice_help': 'ÿßÿÆÿ™ÿ± ÿßŸÑÿµŸàÿ™ ŸÑŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ©',
            'test_voice': 'ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿµŸàÿ™',
            'generating_audio': 'ÿ¨ÿßÿ±Ÿç ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿµŸàÿ™...',
            'audio_ready': 'ÿßŸÑÿµŸàÿ™ ÿ¨ÿßŸáÿ≤!',
            'audio_error': 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿµŸàÿ™',
            'audio_disabled': 'ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ© ŸÖÿπÿ∑ŸÑÿ©',
            
            # Buttons and Actions
            'new_session': 'ÿ¨ŸÑÿ≥ÿ© ÿ¨ÿØŸäÿØÿ©',
            'clear_chat': 'ŸÖÿ≥ÿ≠ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©',
            'change_module': 'ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸàÿ≠ÿØÿ©',
            'start_over': 'ÿßŸÑÿ®ÿØÿ° ŸÖŸÜ ÿ¨ÿØŸäÿØ',
            'back_to_menu': 'ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©',
            'back_to_welcome': 'ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ™ÿ±ÿ≠Ÿäÿ®',
            'back_to_modules': 'ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸàÿ≠ÿØÿßÿ™',
            'back_to_authentication': 'ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÖÿµÿßÿØŸÇÿ©',
            
            # Error Messages
            'api_key_missing': 'ŸÖŸÅÿ™ÿßÿ≠ OpenAI API ÿ∫Ÿäÿ± ŸÖŸÉŸàŸëŸÜ. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÖŸÑŸÅ .env ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ.',
            'no_docs_error': 'ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖÿ≠ÿ™ŸàŸâ Ÿàÿ´ŸäŸÇÿ© ŸÖÿ™ÿßÿ≠',
            'enter_question': 'Ÿäÿ±ÿ¨Ÿâ ÿ∑ÿ±ÿ≠ ÿ≥ÿ§ÿßŸÑ ÿ≠ŸàŸÑ Ÿàÿßÿ¨ÿ®ÿßÿ™ŸÉ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©.',
            'enter_ethics_question': 'Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿ≥ÿ§ÿßŸÑ.',
            'no_modules_found': 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ Ÿàÿ≠ÿØÿßÿ™ ŸÑÿ≠ÿ≥ÿßÿ®ŸÉ. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿØÿπŸÖ.',
            'student_not_found': 'ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸÑÿ® \'{student_id}\' ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',
            'invalid_code': 'ÿ±ŸÖÿ≤ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ ŸÑŸÑÿ∑ÿßŸÑÿ® {student_id}',
            'auth_successful': 'ÿßŸÑŸÖÿµÿßÿØŸÇÿ© ŸÜÿßÿ¨ÿ≠ÿ©',
            'auth_required': 'ŸÖÿµÿßÿØŸÇÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ŸÖÿ∑ŸÑŸàÿ®ÿ©',
            'student_data_missing': 'ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑ÿßŸÑÿ® ÿ∫Ÿäÿ± ŸÖÿ≠ŸÖŸÑÿ©',
            
            # Status Messages
            'database_connected': 'ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ™ÿµŸÑÿ©',
            'database_not_loaded': 'ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ≠ŸÖŸÑÿ©',
            'ai_service_connected': 'ÿÆÿØŸÖÿ© ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÖÿ™ÿµŸÑÿ©',
            'ai_service_unavailable': 'ÿÆÿØŸÖÿ© ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ÿ©',
            
            # Welcome Screen
            'ethics_document_help': 'ŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑŸàÿ´ÿßÿ¶ŸÇ ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿ©',
            'ethics_help_desc': 'ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑŸàÿ´ÿßÿ¶ŸÇ ŸàÿßŸÑÿ•ÿ±ÿ¥ÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ÿßŸÑÿ£ÿÆŸÑÿßŸÇ',
            'coursework_help': 'ŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑÿ¨ÿßŸÖÿπŸäÿ©',
            'coursework_help_desc': 'ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ŸÖŸàÿßÿØ Ÿàÿßÿ¨ÿ®ÿßÿ™ŸÉ ÿßŸÑŸÖÿ≠ÿØÿØÿ©',
            
            # Ethics
            'ethics_guidance': 'ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸä',
            'ethics_document': 'ÿßŸÑŸàÿ´ŸäŸÇÿ© ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿ©',
            'about_ethics_document': 'ÿ≠ŸàŸÑ Ÿáÿ∞Ÿá ÿßŸÑŸàÿ´ŸäŸÇÿ© ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿ©',
            'ethics_assistant_usage': 'ŸÉŸäŸÅŸäÿ© ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ£ÿÆŸÑÿßŸÇ Ÿáÿ∞ÿß',
            'ethics_examples': 'ŸäŸÖŸÉŸÜŸÉ ÿ∑ÿ±ÿ≠ ÿ£ÿ≥ÿ¶ŸÑÿ© ŸÖÿ´ŸÑ:',
            'ethics_example_1': 'ŸÖÿß ŸáŸä ÿßŸÑŸÖÿ®ÿßÿØÿ¶ ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ÿßŸÑŸÖŸÜÿßŸÇÿ¥ÿ© ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸàÿ´ŸäŸÇÿ©ÿü',
            'ethics_example_2': 'ŸÉŸäŸÅ ÿ™ÿπÿ±ŸëŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸàÿ´ŸäŸÇÿ© ÿßŸÑÿ≥ŸÑŸàŸÉ ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿü',
            'ethics_example_3': 'ŸÖÿß ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ∞Ÿä ÿ™ŸÇÿØŸÖŸá Ÿáÿ∞Ÿá ÿßŸÑŸàÿ´ŸäŸÇÿ© ŸÑŸÄ [ŸÖŸàŸÇŸÅ ŸÖÿ≠ÿØÿØ]ÿü',
            'ethics_example_4': 'ŸáŸÑ ŸäŸÖŸÉŸÜŸÉ ÿ™ŸÑÿÆŸäÿµ ÿßŸÑŸÖŸÅÿßŸáŸäŸÖ ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ÿßŸÑŸÖÿ∫ÿ∑ÿßÿ©ÿü',
            'ethics_tips': 'ŸÜÿµÿßÿ¶ÿ≠:',
            'ethics_tip_1': 'ŸÉŸÜ ŸÖÿ≠ÿØÿØÿßŸã ÿ≠ŸàŸÑ ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸä ÿßŸÑÿ∞Ÿä ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜŸá',
            'ethics_tip_2': 'ÿßÿ≥ÿ£ŸÑ ÿπŸÜ ÿßŸÑŸÖŸÅÿßŸáŸäŸÖ ÿ£Ÿà ÿßŸÑŸÖÿ®ÿßÿØÿ¶ ÿ£Ÿà ÿßŸÑŸÖŸàÿßŸÇŸÅ ÿßŸÑŸÖÿ∞ŸÉŸàÿ±ÿ© ŸÅŸä ÿßŸÑŸàÿ´ŸäŸÇÿ©',
            'ethics_tip_3': 'ÿßÿ∑ŸÑÿ® ÿ£ŸÖÿ´ŸÑÿ© ÿ£Ÿà ÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ŸÑŸÑŸÖÿ®ÿßÿØÿ¶ ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸäÿ©',
            
            # Progress and Features
            'step_label': 'ÿßŸÑÿÆÿ∑Ÿàÿ© {current} ŸÖŸÜ {total}',
            'welcome_features': 'ÿ£ÿ®ÿ±ÿ≤ ÿßŸÑŸÖŸäÿ≤ÿßÿ™',
            'feature_ethics_title': 'ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸä',
            'feature_ethics_desc': 'ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ£ÿÆŸÑÿßŸÇŸä ÿßŸÑÿ¥ÿßŸÖŸÑ ÿßŸÑŸÇÿßÿ¶ŸÖ ÿπŸÑŸâ ÿ≥Ÿäÿßÿ≥ÿßÿ™ ÿßŸÑÿ¨ÿßŸÖÿπÿ©',
            'feature_coursework_title': 'ÿØÿπŸÖ ÿßŸÑŸàÿßÿ¨ÿ®ÿßÿ™ ÿßŸÑÿØÿ±ÿßÿ≥Ÿäÿ©',
            'feature_coursework_desc': 'ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≥ÿßÿπÿØÿ© ÿ¥ÿÆÿµŸäÿ© ŸÅŸä ŸÖŸàÿßÿØ Ÿàÿ≠ÿØÿßÿ™ŸÉ ŸàŸàÿßÿ¨ÿ®ÿßÿ™ŸÉ',
            'feature_secure_title': 'ŸàÿµŸàŸÑ ÿ¢ŸÖŸÜ',
            'feature_secure_desc': 'ŸÖÿµÿßÿØŸÇÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ÿ™ÿ∂ŸÖŸÜ ŸàÿµŸàŸÑŸÉ ŸÅŸÇÿ∑ ÿ•ŸÑŸâ ŸÖŸàÿßÿØŸÉ ÿßŸÑÿÆÿßÿµÿ©',
            'feature_audio_title': 'ÿØÿπŸÖ ÿµŸàÿ™Ÿä',
            'feature_audio_desc': 'ÿßÿ≥ÿ™ŸÖÿπ ÿ•ŸÑŸâ ÿßŸÑÿ±ÿØŸàÿØ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿàÿ∏ŸäŸÅÿ© ÿßŸÑŸÜÿµ ÿ•ŸÑŸâ ŸÉŸÑÿßŸÖ',
        }
    
    def _get_french_translations(self) -> Dict[str, str]:
        """French translations"""
        return {
            # App Headers
            'app_title': 'Assistant Universit√© de Roehampton',
            'app_subtitle': 'Votre compagnon acad√©mique intelligent',
            'welcome_message': 'Comment puis-je vous aider aujourd\'hui ?',
            'powered_by': 'Aliment√© par IA',
            
            # Navigation & Controls
            'language_selector': 'Langue',
            'voice_settings': 'Param√®tres Vocaux',
            'quick_actions': 'Actions Rapides',
            'system_status': '√âtat du Syst√®me',
            'student_information': 'Informations √âtudiant',
            'current_session': 'Session Actuelle',
            
            # Authentication
            'enter_student_id': 'Entrez Votre ID √âtudiant',
            'student_id_label': 'ID √âtudiant :',
            'student_id_placeholder': 'ex: A00034131',
            'student_id_help': 'Entrez votre ID complet d\'√©tudiant de l\'Universit√© de Roehampton',
            'enter_access_code': 'Entrez Votre Code d\'Acc√®s',
            'access_code_label': 'Code d\'Acc√®s :',
            'access_code_placeholder': 'Entrez votre code unique',
            'access_code_help': 'Entrez le code num√©rique qui vous a √©t√© fourni',
            'verify_button': 'V√©rifier ‚úÖ',
            'back_button': 'üîô Retour',
            'next_button': 'Suivant ‚û°Ô∏è',
            
            # Module Selection
            'select_module': 'S√©lectionnez Votre Module',
            'module_label': 'Module :',
            'programme_label': 'Programme :',
            'choose_module': 'Choisissez le module pour lequel vous avez besoin d\'aide :',
            'documents_available': 'documents disponibles',
            'all_materials': 'Tous les Mat√©riaux {module}',
            'select_button': 'S√©lectionner {module}',
            
            # Coursework Types
            'coursework_assistance': 'Assistance aux Devoirs',
            'coursework_help_type': 'Quel type d\'aide aux devoirs avez-vous besoin ?',
            'assignment_questions': 'Questions d\'Assignation',
            'assignment_questions_desc': 'Aide pour comprendre les exigences et questions d\'assignation',
            'reading_materials': 'Mat√©riaux de Lecture',
            'reading_materials_desc': 'Assistance avec les lectures et mat√©riaux de cours',
            'concepts_theory': 'Concepts et Th√©orie',
            'concepts_theory_desc': 'Explication des concepts et th√©ories cl√©s',
            'exam_preparation': 'Pr√©paration aux Examens',
            'exam_preparation_desc': 'Aide pour se pr√©parer aux examens',
            'general_questions': 'Questions G√©n√©rales',
            'general_questions_desc': 'Toute autre question concernant le module',
            
            # Chat Interface
            'course_assistant': 'Assistant de Cours',
            'ethics_advisor': 'Conseiller en √âthique',
            'you': 'Vous',
            'loading_materials': 'Chargement de vos mat√©riaux de module...',
            'example_questions': 'Exemples de Questions',
            'chat_placeholder': 'Posez-moi des questions sur vos devoirs...',
            'ethics_placeholder': 'Posez-moi des questions sur l\'√©thique bas√©es sur le document Reforming Modernity...',
            'analyzing_materials': 'Analyse de vos mat√©riaux de devoirs...',
            'consulting_ethics': 'Consultation des conseils √©thiques...',
            
            # Audio
            'enable_audio': 'Activer les R√©ponses Audio',
            'audio_help': 'Basculer les r√©ponses audio pour l\'accessibilit√©',
            'select_voice': 'S√©lectionner la Voix',
            'voice_help': 'Choisissez la voix pour les r√©ponses audio',
            'test_voice': 'Tester la Voix',
            'generating_audio': 'G√©n√©ration audio...',
            'audio_ready': 'Audio pr√™t !',
            'audio_error': '√âchec de la g√©n√©ration audio',
            'audio_disabled': 'R√©ponses audio d√©sactiv√©es',
            
            # Buttons and Actions
            'new_session': 'Nouvelle Session',
            'clear_chat': 'Effacer le Chat',
            'change_module': 'Changer de Module',
            'start_over': 'Recommencer',
            'back_to_menu': 'Retour au Menu',
            'back_to_welcome': 'Retour √† l\'Accueil',
            'back_to_modules': 'Retour aux Modules',
            'back_to_authentication': 'Retour √† l\'Authentification',
            
            # Error Messages
            'api_key_missing': 'Cl√© API OpenAI non configur√©e. Veuillez v√©rifier votre fichier .env.',
            'no_docs_error': 'Aucun contenu de document disponible',
            'enter_question': 'Veuillez poser une question sur vos devoirs.',
            'enter_ethics_question': 'Veuillez entrer une question.',
            'no_modules_found': 'Aucun module trouv√© pour votre compte. Veuillez contacter le support.',
            'student_not_found': 'ID √©tudiant \'{student_id}\' non trouv√© dans la base de donn√©es',
            'invalid_code': 'Code invalide pour l\'√©tudiant {student_id}',
            'auth_successful': 'Authentification r√©ussie',
            'auth_required': 'Authentification √©tudiant requise',
            'student_data_missing': 'Donn√©es √©tudiant non charg√©es',
            
            # Status Messages
            'database_connected': 'Base de Donn√©es Connect√©e',
            'database_not_loaded': 'Base de Donn√©es Non Charg√©e',
            'ai_service_connected': 'Service IA Connect√©',
            'ai_service_unavailable': 'Service IA Non Disponible',
            
            # Welcome Screen
            'ethics_document_help': 'Aide Documents √âthiques',
            'ethics_help_desc': 'Obtenez de l\'aide avec les documents et directives li√©s √† l\'√©thique',
            'coursework_help': 'Aide Devoirs Universitaires',
            'coursework_help_desc': 'Obtenez de l\'aide avec vos mat√©riaux de devoirs sp√©cifiques',
            
            # Ethics
            'ethics_guidance': 'Conseils √âthiques',
            'ethics_document': 'Document √âthique',
            'about_ethics_document': '√Ä Propos de ce Document √âthique',
            'ethics_assistant_usage': 'Comment Utiliser cet Assistant √âthique',
            'ethics_examples': 'Vous pouvez poser des questions comme :',
            'ethics_example_1': 'Quels sont les principaux principes √©thiques discut√©s dans ce document ?',
            'ethics_example_2': 'Comment ce document d√©finit-il le comportement √©thique ?',
            'ethics_example_3': 'Quels conseils cela fournit-il pour [situation sp√©cifique] ?',
            'ethics_example_4': 'Pouvez-vous r√©sumer les concepts √©thiques cl√©s couverts ?',
            'ethics_tips': 'Conseils :',
            'ethics_tip_1': 'Soyez sp√©cifique sur les conseils √©thiques que vous recherchez',
            'ethics_tip_2': 'Posez des questions sur les concepts, principes ou situations mentionn√©s dans le document',
            'ethics_tip_3': 'Demandez des exemples ou applications de principes √©thiques',
            
            # Progress and Features
            'step_label': '√âtape {current} sur {total}',
            'welcome_features': 'Points Forts des Fonctionnalit√©s',
            'feature_ethics_title': 'Conseils √âthiques',
            'feature_ethics_desc': 'Acc√©dez √† des conseils √©thiques complets bas√©s sur les politiques universitaires',
            'feature_coursework_title': 'Support aux Devoirs',
            'feature_coursework_desc': 'Obtenez une aide personnalis√©e avec vos mat√©riaux de module et devoirs',
            'feature_secure_title': 'Acc√®s S√©curis√©',
            'feature_secure_desc': 'L\'authentification √©tudiant garantit que vous n\'acc√©dez qu\'√† vos propres mat√©riaux',
            'feature_audio_title': 'Support Audio',
            'feature_audio_desc': '√âcoutez les r√©ponses avec la fonctionnalit√© de synth√®se vocale',
        }
    
    def _get_spanish_translations(self) -> Dict[str, str]:
        """Spanish translations"""
        return {
            # App Headers
            'app_title': 'Asistente Universidad de Roehampton',
            'app_subtitle': 'Tu compa√±ero acad√©mico inteligente',
            'welcome_message': '¬øC√≥mo puedo ayudarte hoy?',
            'powered_by': 'Impulsado por IA',
            
            # Navigation & Controls
            'language_selector': 'Idioma',
            'voice_settings': 'Configuraci√≥n de Voz',
            'quick_actions': 'Acciones R√°pidas',
            'system_status': 'Estado del Sistema',
            'student_information': 'Informaci√≥n del Estudiante',
            'current_session': 'Sesi√≥n Actual',
            
            # Authentication
            'enter_student_id': 'Ingresa tu ID de Estudiante',
            'student_id_label': 'ID de Estudiante:',
            'student_id_placeholder': 'ej: A00034131',
            'student_id_help': 'Ingresa tu ID completo de estudiante de la Universidad de Roehampton',
            'enter_access_code': 'Ingresa tu C√≥digo de Acceso',
            'access_code_label': 'C√≥digo de Acceso:',
            'access_code_placeholder': 'Ingresa tu c√≥digo √∫nico',
            'access_code_help': 'Ingresa el c√≥digo num√©rico que se te proporcion√≥',
            'verify_button': 'Verificar ‚úÖ',
            'back_button': 'üîô Atr√°s',
            'next_button': 'Siguiente ‚û°Ô∏è',
            
            # Module Selection
            'select_module': 'Selecciona tu M√≥dulo',
            'module_label': 'M√≥dulo:',
            'programme_label': 'Programa:',
            'choose_module': 'Elige el m√≥dulo con el que necesitas ayuda:',
            'documents_available': 'documentos disponibles',
            'all_materials': 'Todos los Materiales de {module}',
            'select_button': 'Seleccionar {module}',
            
            # Coursework Types
            'coursework_assistance': 'Asistencia con Tareas',
            'coursework_help_type': '¬øQu√© tipo de ayuda con tareas necesitas?',
            'assignment_questions': 'Preguntas de Asignaci√≥n',
            'assignment_questions_desc': 'Ayuda para entender los requisitos y preguntas de asignaci√≥n',
            'reading_materials': 'Materiales de Lectura',
            'reading_materials_desc': 'Asistencia con lecturas y materiales del curso',
            'concepts_theory': 'Conceptos y Teor√≠a',
            'concepts_theory_desc': 'Explicaci√≥n de conceptos y teor√≠as clave',
            'exam_preparation': 'Preparaci√≥n para Ex√°menes',
            'exam_preparation_desc': 'Ayuda para prepararse para ex√°menes',
            'general_questions': 'Preguntas Generales',
            'general_questions_desc': 'Cualquier otra pregunta sobre el m√≥dulo',
            
            # Chat Interface
            'course_assistant': 'Asistente del Curso',
            'ethics_advisor': 'Asesor de √âtica',
            'you': 'T√∫',
            'loading_materials': 'Cargando tus materiales del m√≥dulo...',
            'example_questions': 'Preguntas de Ejemplo',
            'chat_placeholder': 'Preg√∫ntame sobre tus tareas...',
            'ethics_placeholder': 'Preg√∫ntame sobre √©tica basado en el documento Reforming Modernity...',
            'analyzing_materials': 'Analizando tus materiales de tareas...',
            'consulting_ethics': 'Consultando orientaci√≥n √©tica...',
            
            # Audio
            'enable_audio': 'Habilitar Respuestas de Audio',
            'audio_help': 'Alternar respuestas de audio para accesibilidad',
            'select_voice': 'Seleccionar Voz',
            'voice_help': 'Elige la voz para las respuestas de audio',
            'test_voice': 'Probar Voz',
            'generating_audio': 'Generando audio...',
            'audio_ready': '¬°Audio listo!',
            'audio_error': 'Error al generar audio',
            'audio_disabled': 'Respuestas de audio deshabilitadas',
            
            # Buttons and Actions
            'new_session': 'Nueva Sesi√≥n',
            'clear_chat': 'Limpiar Chat',
            'change_module': 'Cambiar M√≥dulo',
            'start_over': 'Empezar de Nuevo',
            'back_to_menu': 'Volver al Men√∫',
            'back_to_welcome': 'Volver al Inicio',
            'back_to_modules': 'Volver a M√≥dulos',
            'back_to_authentication': 'Volver a Autenticaci√≥n',
            
            # Error Messages
            'api_key_missing': 'Clave API de OpenAI no configurada. Por favor verifica tu archivo .env.',
            'no_docs_error': 'No hay contenido de documento disponible',
            'enter_question': 'Por favor haz una pregunta sobre tus tareas.',
            'enter_ethics_question': 'Por favor ingresa una pregunta.',
            'no_modules_found': 'No se encontraron m√≥dulos para tu cuenta. Por favor contacta soporte.',
            'student_not_found': 'ID de estudiante \'{student_id}\' no encontrado en la base de datos',
            'invalid_code': 'C√≥digo inv√°lido para el estudiante {student_id}',
            'auth_successful': 'Autenticaci√≥n exitosa',
            'auth_required': 'Autenticaci√≥n de estudiante requerida',
            'student_data_missing': 'Datos del estudiante no cargados',
            
            # Status Messages
            'database_connected': 'Base de Datos Conectada',
            'database_not_loaded': 'Base de Datos No Cargada',
            'ai_service_connected': 'Servicio IA Conectado',
            'ai_service_unavailable': 'Servicio IA No Disponible',
            
            # Welcome Screen
            'ethics_document_help': 'Ayuda con Documentos de √âtica',
            'ethics_help_desc': 'Obt√©n asistencia con documentos y directrices relacionados con √©tica',
            'coursework_help': 'Ayuda con Tareas Universitarias',
            'coursework_help_desc': 'Obt√©n ayuda con tus materiales de tareas espec√≠ficos',
            
            # Ethics
            'ethics_guidance': 'Orientaci√≥n √âtica',
            'ethics_document': 'Documento de √âtica',
            'about_ethics_document': 'Acerca de este Documento de √âtica',
            'ethics_assistant_usage': 'C√≥mo Usar este Asistente de √âtica',
            'ethics_examples': 'Puedes hacer preguntas como:',
            'ethics_example_1': '¬øCu√°les son los principales principios √©ticos discutidos en este documento?',
            'ethics_example_2': '¬øC√≥mo define este documento el comportamiento √©tico?',
            'ethics_example_3': '¬øQu√© orientaci√≥n proporciona esto para [situaci√≥n espec√≠fica]?',
            'ethics_example_4': '¬øPuedes resumir los conceptos √©ticos clave cubiertos?',
            'ethics_tips': 'Consejos:',
            'ethics_tip_1': 'S√© espec√≠fico sobre la orientaci√≥n √©tica que buscas',
            'ethics_tip_2': 'Pregunta sobre conceptos, principios o situaciones mencionados en el documento',
            'ethics_tip_3': 'Solicita ejemplos o aplicaciones de principios √©ticos',
            
            # Progress and Features
            'step_label': 'Paso {current} de {total}',
            'welcome_features': 'Caracter√≠sticas Destacadas',
            'feature_ethics_title': 'Orientaci√≥n √âtica',
            'feature_ethics_desc': 'Accede a orientaci√≥n √©tica integral basada en pol√≠ticas universitarias',
            'feature_coursework_title': 'Soporte de Tareas',
            'feature_coursework_desc': 'Obt√©n ayuda personalizada con tus materiales de m√≥dulo y tareas',
            'feature_secure_title': 'Acceso Seguro',
            'feature_secure_desc': 'La autenticaci√≥n de estudiante asegura que solo accedas a tus propios materiales',
            'feature_audio_title': 'Soporte de Audio',
            'feature_audio_desc': 'Escucha respuestas con funcionalidad de texto a voz',
        }


# Create global language manager instance
language_manager = LanguageManager()

def t(key: str, default: str = None, **kwargs) -> str:
    """Convenient translation function"""
    return language_manager.get_text(key, default=default, **kwargs)

def init_language_system():
    """Initialize language system in session state"""
    if 'language' not in st.session_state:
        st.session_state.language = 'en'
    
    language_manager.current_language = st.session_state.language

def render_language_selector():
    """Render language selector in sidebar"""
    languages = language_manager.get_language_options()
    
    selected_language = st.selectbox(
        t('language_selector'),
        options=list(languages.keys()),
        format_func=lambda x: languages[x],
        index=list(languages.keys()).index(st.session_state.language),
        key="language_selector"
    )
    
    if selected_language != st.session_state.language:
        language_manager.set_language(selected_language)

def get_rtl_css() -> str:
    """Generate RTL CSS if needed"""
    if language_manager.is_rtl():
        return """
        <style>
            /* RTL Support for Arabic */
            .arabic-text, [lang="ar"] {
                direction: rtl;
                text-align: right;
                font-family: 'Noto Sans Arabic', 'Arial', 'Tahoma', sans-serif !important;
            }
            
            .stSelectbox > div > div {
                direction: rtl;
                text-align: right;
            }
            
            .stTextInput > div > div > input {
                direction: rtl;
                text-align: right;
            }
            
            .stButton > button {
                direction: rtl;
            }
            
            /* Reverse flex direction for RTL */
            .rtl-flex {
                flex-direction: row-reverse;
            }
        </style>
        """
    return ""
